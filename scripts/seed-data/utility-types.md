### user

What are utility types in TypeScript and why should I use them?

---

### assistant

TypeScript utility types are special, built-in generic types that help you manipulate other types. They let you create new types from existing ones without writing a lot of boilerplate code.

For example, imagine you have a `User` type:

```ts
interface User {
  id: number;
  name: string;
  email: string;
  isAdmin: boolean;
}
```

What if you want to create a new user, but you don't have the `id` yet (as it's generated by the database)? You could define a new `UserCreation` type, but that's repetitive.

This is where utility types like `Omit` come in handy:

```ts
type UserCreationParams = Omit<User, "id">;

// This is equivalent to:
// type UserCreationParams = {
//   name: string;
//   email: string;
//   isAdmin: boolean;
// };
```

Some other very common utility types are:

- `Partial<T>`: Makes all properties of `T` optional. Useful for update operations.
- `Readonly<T>`: Makes all properties of `T` read-only.
- `Pick<T, K>`: Creates a type by picking a set of properties `K` from `T`.
- `Required<T>`: The opposite of `Partial`, it makes all properties of `T` required.

They help you keep your code DRY (Don't Repeat Yourself) and maintain a single source of truth for your core types.

---

### user

Can I combine them? For example, can I create a type for a user update where all fields are optional and I can't change the `id`?

---

### assistant

Yes, you can absolutely nest and combine them! That's what makes them so powerful.

To achieve what you described, you would first make all fields optional with `Partial`, and then remove the `id` field with `Omit`.

```ts
interface User {
  id: number;
  name: string;
  email: string;
}

type UserUpdatePayload = Omit<Partial<User>, "id">;

// Let's see what this creates:
// const payload: UserUpdatePayload = {
//   name: 'New Name' // this is valid
// }
// const payload2: UserUpdatePayload = {
//   email: 'new@email.com' // this is also valid
// }
// const payload3: UserUpdatePayload = {
//   id: 123 // This would cause a TypeScript error!
// }
```

This `UserUpdatePayload` type is now a partial `User` object, but without the `id` property, which is exactly what you'd want for an update payload.
